class Message < ActiveRecord::Base
	belongs_to :user

	scope :unread, -> { where read_at: nil }
	scope :read, -> { where "read_at IS NOT NULL" }

	def author
		user
	end

	def unique_authors_with_read_messages
		read.joins(:user).uniq
	end
end
